import{u as T,s as R}from"./BQPXNKIG.js";import{u as V}from"./LRrg9f3x.js";import{y as N,b as F,k as D,a1 as H,a7 as P,O as r,Z as m,z as d,H as i,U as e,V as u,W as C,F as A,_ as L,Y as y,w as U,J as w,a3 as j,I as B}from"./lyzmDKnL.js";import{_ as E}from"./6eD5ddFK.js";import{d as O,a as b,_ as G}from"#entry";import{useNotificationService as k}from"./DyB7GgJ-.js";import{u as J}from"./BJ9MKNdY.js";import"./r888hXRh.js";import"./wtOtceyD.js";const K={key:0,class:"card bg-gradient-to-r from-blue-500 to-purple-600 text-white"},W={class:"text-center"},X={class:"text-2xl md:text-3xl font-bold mb-4"},Y={key:0,class:"flex justify-center gap-4 md:gap-8"},Z={class:"flex flex-col items-center"},q={class:"text-4xl md:text-5xl font-bold"},Q={class:"text-sm md:text-base opacity-90 mt-1"},tt={class:"flex flex-col items-center"},et={class:"text-4xl md:text-5xl font-bold"},st={class:"text-sm md:text-base opacity-90 mt-1"},at={class:"flex flex-col items-center"},ot={class:"text-4xl md:text-5xl font-bold"},rt={class:"text-sm md:text-base opacity-90 mt-1"},it={class:"flex flex-col items-center"},nt={class:"text-4xl md:text-5xl font-bold"},dt={class:"text-sm md:text-base opacity-90 mt-1"},lt={key:1,class:"text-2xl md:text-3xl font-bold animate-pulse"},ct=N({__name:"Countdown",setup(a){const s=T(),t=V(),l=F(Date.now());let h=null;const o=D(()=>{const g=l.value;if(!s.currentCountdown)return{days:0,hours:0,minutes:0,seconds:0,total:0,isPast:!1};const x=new Date(s.currentCountdown.deadline).getTime()-g,S=x<0,p=Math.abs(x);return{days:Math.floor(p/(1e3*60*60*24)),hours:Math.floor(p%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(p%(1e3*60*60)/(1e3*60)),seconds:Math.floor(p%(1e3*60)/1e3),total:x,isPast:S}});return H(()=>{h=R(()=>{l.value=Date.now()},1e3)}),P(()=>{h&&clearInterval(h)}),(g,_)=>d(s).isVisible?(i(),r("div",K,[e("div",W,[e("h2",X,u(d(s).currentCountdown?.title),1),o.value.isPast?(i(),r("div",lt," ðŸŽ‰ Deadline Reached! ðŸŽ‰ ")):(i(),r("div",Y,[e("div",Z,[e("div",q,u(String(o.value.days).padStart(2,"0")),1),e("div",Q,u(d(t).t("days")),1)]),e("div",tt,[e("div",et,u(String(o.value.hours).padStart(2,"0")),1),e("div",st,u(d(t).t("hours")),1)]),e("div",at,[e("div",ot,u(String(o.value.minutes).padStart(2,"0")),1),e("div",rt,u(d(t).t("minutes")),1)]),e("div",it,[e("div",nt,u(String(o.value.seconds).padStart(2,"0")),1),e("div",dt,u(d(t).t("seconds")),1)])]))])])):m("",!0)}}),I=O("notifications",{state:()=>({notifications:[],loading:!1,error:null,hasMore:!0,currentPage:0,pageSize:25,unreadCount:0}),getters:{sortedNotifications:a=>[...a.notifications].sort((s,t)=>new Date(t.created_at).getTime()-new Date(s.created_at).getTime()),unreadNotifications:a=>a.notifications.filter(s=>!s.is_read),readNotifications:a=>a.notifications.filter(s=>s.is_read),notificationsByType:a=>s=>a.notifications.filter(t=>t.type===s)},actions:{async fetchNotifications(a=0){const t=b().teamCode;if(!t){this.error="No team authenticated";return}this.loading=!0,this.error=null;try{const l=k(),h=a*this.pageSize,o=await l.getNotificationsForTeam(t,this.pageSize,h);a===0?this.notifications=o:this.notifications.push(...o),this.currentPage=a,this.hasMore=o.length===this.pageSize,await this.updateUnreadCount()}catch(l){console.error("Failed to fetch notifications:",l),this.error=l.message}finally{this.loading=!1}},async loadMore(){!this.hasMore||this.loading||await this.fetchNotifications(this.currentPage+1)},async refresh(){await this.fetchNotifications(0)},async markAsRead(a){const t=b().teamCode;if(t)try{await k().markAsRead(a,t);const h=this.notifications.find(o=>o.id===a);h&&(h.is_read=!0,this.unreadCount=Math.max(0,this.unreadCount-1))}catch(l){console.error("Failed to mark notification as read:",l)}},async markAllAsRead(){const s=b().teamCode;if(s)try{await k().markAllAsRead(s),this.notifications.forEach(l=>l.is_read=!0),this.unreadCount=0}catch(t){console.error("Failed to mark all as read:",t)}},async updateUnreadCount(){const s=b().teamCode;if(s)try{const t=k();this.unreadCount=await t.getUnreadCount(s)}catch(t){console.error("Failed to update unread count:",t)}},addNotification(a){this.notifications.some(t=>t.id===a.id)||(this.notifications.unshift(a),a.is_read||this.unreadCount++)},clearNotifications(){this.notifications=[],this.currentPage=0,this.hasMore=!0,this.unreadCount=0},async initialize(){await this.fetchNotifications(0)}},persist:!1}),ut={class:"notification-list"},ht={key:0,class:"flex items-center justify-between mb-4"},ft={class:"text-lg font-semibold"},mt={key:0,class:"ml-2 text-sm font-normal text-gray-500"},xt={key:1,class:"space-y-3"},gt={key:2,class:"p-4 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-lg"},_t={key:3,class:"text-center py-12"},pt=["onClick"],yt={class:"flex items-start gap-3"},bt={class:"flex-shrink-0 mt-1"},vt={class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20"},wt={key:0,"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},kt={key:1,"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},Ct={key:2,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},St={key:3,"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},Mt={class:"flex-1 min-w-0"},Nt={class:"mt-1 flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400"},$t={key:0,class:"flex items-center gap-1"},zt={key:1,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},At={class:"flex-shrink-0"},Lt={key:5,class:"mt-4 text-center"},Bt=["disabled"],Tt=N({__name:"NotificationList",props:{limit:{default:0},showHeader:{type:Boolean,default:!0},showLoadMore:{type:Boolean,default:!0},scrollable:{type:Boolean,default:!0},compact:{type:Boolean,default:!1}},setup(a){const s=a,t=I(),l=D(()=>s.limit>0?t.sortedNotifications.slice(0,s.limit):t.sortedNotifications),h=f=>{const c=[];return f.is_read?c.push("bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"):c.push("bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"),c.push("hover:shadow-md"),c.join(" ")},o=f=>{switch(f){case"success":return"bg-green-500";case"warning":return"bg-yellow-500";case"error":return"bg-red-500";default:return"bg-blue-500"}},g=f=>{switch(f){case"success":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"warning":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"error":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}},_=f=>{const c=new Date(f),v=new Date().getTime()-c.getTime(),M=Math.floor(v/6e4),$=Math.floor(v/36e5),z=Math.floor(v/864e5);return M<1?"Just now":M<60?`${M}m ago`:$<24?`${$}h ago`:z<7?`${z}d ago`:c.toLocaleDateString()},x=async f=>{f.is_read||await t.markAsRead(f.id)},S=async()=>{await t.markAllAsRead()},p=async()=>{await t.loadMore()};return(f,c)=>(i(),r("div",ut,[a.showHeader?(i(),r("div",ht,[e("h3",ft,[c[0]||(c[0]=C(" Notifications ",-1)),d(t).unreadCount>0?(i(),r("span",mt," ("+u(d(t).unreadCount)+" unread) ",1)):m("",!0)]),d(t).unreadCount>0?(i(),r("button",{key:0,onClick:S,class:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400"}," Mark all as read ")):m("",!0)])):m("",!0),d(t).loading&&d(t).notifications.length===0?(i(),r("div",xt,[(i(),r(A,null,L(3,n=>e("div",{key:n,class:"animate-pulse"},[...c[1]||(c[1]=[e("div",{class:"h-20 bg-gray-200 dark:bg-gray-700 rounded-lg"},null,-1)])])),64))])):d(t).error?(i(),r("div",gt,u(d(t).error),1)):d(t).notifications.length===0?(i(),r("div",_t,[...c[2]||(c[2]=[e("svg",{class:"w-16 h-16 mx-auto text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"No notifications yet",-1)])])):(i(),r("div",{key:4,class:y(["space-y-2",{"max-h-96 overflow-y-auto":a.scrollable}])},[(i(!0),r(A,null,L(l.value,n=>(i(),r("div",{key:n.id,onClick:v=>x(n),class:y(["notification-item p-4 rounded-lg border transition-all cursor-pointer",h(n)])},[e("div",yt,[e("div",bt,[e("div",{class:y(["w-8 h-8 rounded-full flex items-center justify-center",o(n.type)])},[(i(),r("svg",vt,[n.type==="success"?(i(),r("path",wt)):n.type==="warning"?(i(),r("path",kt)):n.type==="error"?(i(),r("path",Ct)):(i(),r("path",St))]))],2)]),e("div",Mt,[e("p",{class:y(["text-sm text-gray-900 dark:text-gray-100",{"font-semibold":!n.is_read}])},u(n.message),3),e("div",Nt,[n.sender?(i(),r("span",$t,[c[3]||(c[3]=e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})],-1)),C(" "+u(n.sender),1)])):m("",!0),e("span",null,u(_(n.created_at)),1),n.is_read?m("",!0):(i(),r("span",zt," New "))])]),e("div",At,[e("span",{class:y(["inline-flex items-center px-2 py-1 rounded text-xs font-medium capitalize",g(n.type)])},u(n.type),3)])])],10,pt))),128))],2)),a.showLoadMore&&d(t).hasMore?(i(),r("div",Lt,[e("button",{onClick:p,disabled:d(t).loading,class:"px-4 py-2 text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg disabled:opacity-50"},u(d(t).loading?"Loading...":"Load More"),9,Bt)])):m("",!0)]))}}),Dt=G(Tt,[["__scopeId","data-v-13c0651e"]]),Ht={class:"space-y-8"},It={class:"text-center py-12"},Rt={class:"flex flex-col sm:flex-row gap-4 justify-center"},Vt={key:0,class:"card"},Wt=N({__name:"index",setup(a){const s=b(),t=I(),l=T();return H(async()=>{await l.fetchActiveCountdown(),s.isAuthenticated&&await t.initialize()}),U(()=>s.isAuthenticated,async h=>{h?await t.initialize():t.clearNotifications()}),J({title:"Home - HIKEathon 2025"}),(h,o)=>{const g=ct,_=E,x=Dt;return i(),r("div",Ht,[w(g),e("section",It,[o[2]||(o[2]=e("h1",{class:"text-4xl md:text-6xl font-bold text-gray-900 dark:text-white mb-4"}," Welcome to HIKEathon 2025 ",-1)),o[3]||(o[3]=e("p",{class:"text-xl text-gray-600 dark:text-gray-400 mb-8"}," Track your team's progress in real-time ",-1)),e("div",Rt,[w(_,{to:"/chat",class:"btn btn-primary"},{default:B(()=>[...o[0]||(o[0]=[C(" Start Chatting ",-1)])]),_:1}),w(_,{to:"/images",class:"btn btn-secondary"},{default:B(()=>[...o[1]||(o[1]=[C(" Generate Images ",-1)])]),_:1})])]),d(s).isAuthenticated?(i(),r("section",Vt,[w(x,{"show-header":!0,"show-load-more":!0,scrollable:!0})])):m("",!0),o[4]||(o[4]=j('<section class="grid md:grid-cols-3 gap-6"><div class="card"><h2 class="text-xl font-semibold mb-2">AI Chat</h2><p class="text-gray-600 dark:text-gray-400"> Chat with advanced AI models powered by IONOS Model Hub with streaming support. </p></div><div class="card"><h2 class="text-xl font-semibold mb-2">Image Generation</h2><p class="text-gray-600 dark:text-gray-400"> Create stunning images with DALL-E 3, FLUX, and Stable Diffusion models. </p></div><div class="card"><h2 class="text-xl font-semibold mb-2">Live Updates</h2><p class="text-gray-600 dark:text-gray-400"> Receive instant broadcasts and announcements from event organizers. </p></div></section>',1))])}}});export{Wt as default};
